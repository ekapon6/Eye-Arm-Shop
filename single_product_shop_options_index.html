<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ร้านขวดน้ำมินิมอล – สินค้าชิ้นเดียว หลายออปชัน</title>
  <meta name="description" content="ตัวอย่างเว็บขายของชิ้นเดียว แต่มีหลายตัวเลือก (สี/ขนาด) พร้อมตะกร้าและสรุปคำสั่งซื้อแบบไม่ต้องพึ่งหลังบ้าน" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ป้องกัน select/btn กระโดดเวลา focus */
    * { outline: none; }
    .option-btn[aria-checked="true"] { box-shadow: 0 0 0 2px rgba(59,130,246,.7) inset; }
    .backdrop { backdrop-filter: blur(2px); }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <!-- Header -->
  <header class="sticky top-0 z-20 bg-white/90 backdrop p-4 shadow-sm">
    <div class="mx-auto max-w-6xl flex items-center justify-between">
      <a href="#" class="font-semibold text-xl">MinimalBottle</a>
      <button id="openCartBtn" class="relative rounded-2xl border px-4 py-2 hover:bg-slate-50">
        <span class="inline-flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
            <path d="M2.25 2.25a.75.75 0 000 1.5h1.386l2.73 10.92a1.5 1.5 0 001.455 1.13h9.18a1.5 1.5 0 001.455-1.13l1.59-6.36a.75.75 0 10-1.455-.364l-1.59 6.36a.001.001 0 01-.001.001H7.821a.001.001 0 01-.001-.001L5.318 4.5H19.5a.75.75 0 000-1.5H2.25z"/>
            <path d="M9 20.25a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm9 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>
          </svg>
          ตะกร้า
          <span id="cartCount" class="ml-2 inline-flex min-w-[20px] justify-center rounded-full bg-slate-900 px-2 text-white text-xs">0</span>
        </span>
      </button>
    </div>
  </header>

  <!-- Hero / Product -->
  <main class="mx-auto max-w-6xl px-4 py-10 grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Gallery -->
    <section>
      <div class="aspect-square overflow-hidden rounded-2xl bg-white shadow-sm">
        <img id="mainImage" src="https://images.unsplash.com/photo-1543165796-5426273eaab6?q=80&w=1200&auto=format&fit=crop" alt="ขวดน้ำมินิมอล" class="h-full w-full object-cover"/>
      </div>
      <div class="mt-3 grid grid-cols-4 gap-2">
        <button data-img="https://images.unsplash.com/photo-1543165796-5426273eaab6?q=80&w=1200&auto=format&fit=crop" class="thumb overflow-hidden rounded-xl ring-2 ring-transparent hover:ring-slate-300">
          <img src="https://images.unsplash.com/photo-1543165796-5426273eaab6?q=80&w=300&auto=format&fit=crop" class="h-20 w-full object-cover" alt="ภาพสินค้า 1" />
        </button>
        <button data-img="https://images.unsplash.com/photo-1526402460200-85c3c5b5d4c5?q=80&w=1200&auto=format&fit=crop" class="thumb overflow-hidden rounded-xl ring-2 ring-transparent hover:ring-slate-300">
          <img src="https://images.unsplash.com/photo-1526402460200-85c3c5b5d4c5?q=80&w=300&auto=format&fit=crop" class="h-20 w-full object-cover" alt="ภาพสินค้า 2" />
        </button>
        <button data-img="https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?q=80&w=1200&auto=format&fit=crop" class="thumb overflow-hidden rounded-xl ring-2 ring-transparent hover:ring-slate-300">
          <img src="https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?q=80&w=300&auto=format&fit=crop" class="h-20 w-full object-cover" alt="ภาพสินค้า 3" />
        </button>
        <button data-img="https://images.unsplash.com/photo-1556228724-4d2b3a5bc7f7?q=80&w=1200&auto=format&fit=crop" class="thumb overflow-hidden rounded-xl ring-2 ring-transparent hover:ring-slate-300">
          <img src="https://images.unsplash.com/photo-1556228724-4d2b3a5bc7f7?q=80&w=300&auto=format&fit=crop" class="h-20 w-full object-cover" alt="ภาพสินค้า 4" />
        </button>
      </div>
    </section>

    <!-- Details -->
    <section>
      <h1 class="text-2xl md:text-3xl font-semibold">ขวดน้ำมินิมอล (Minimal Bottle)</h1>
      <p class="mt-2 text-slate-600">ขวดน้ำสแตนเลสเก็บอุณหภูมิ ดีไซน์มินิมอล พกพาง่าย เหมาะสำหรับทุกวัน</p>

      <!-- Price -->
      <div class="mt-4 flex items-end gap-3">
        <div class="text-3xl font-bold" id="priceLabel">฿390</div>
        <div class="text-slate-400 line-through" id="compareAtLabel" hidden>฿450</div>
        <span id="stockBadge" class="ml-auto inline-flex items-center rounded-full bg-emerald-50 px-3 py-1 text-emerald-600 text-sm">มีของ</span>
      </div>

      <!-- Options -->
      <div class="mt-6 space-y-6">
        <!-- Color -->
        <div>
          <div class="mb-2 text-sm text-slate-500">สี</div>
          <div id="colorGroup" class="flex flex-wrap gap-2"></div>
        </div>
        <!-- Size -->
        <div>
          <div class="mb-2 text-sm text-slate-500">ขนาด</div>
          <div id="sizeGroup" class="flex flex-wrap gap-2"></div>
        </div>
        <!-- Qty -->
        <div class="flex items-center gap-3">
          <div class="text-sm text-slate-500">จำนวน</div>
          <div class="inline-flex items-center rounded-xl border">
            <button id="decQty" class="px-3 py-2 hover:bg-slate-50">−</button>
            <input id="qtyInput" type="number" min="1" value="1" class="w-14 border-x py-2 text-center" />
            <button id="incQty" class="px-3 py-2 hover:bg-slate-50">＋</button>
          </div>
        </div>
      </div>

      <!-- CTA -->
      <div class="mt-6 flex flex-col sm:flex-row gap-3">
        <button id="addToCartBtn" class="flex-1 rounded-2xl bg-slate-900 px-5 py-3 text-white font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed">เพิ่มลงตะกร้า</button>
        <button id="buyNowBtn" class="rounded-2xl border px-5 py-3 hover:bg-slate-50">สั่งซื้อตอนนี้</button>
      </div>

      <!-- Benefits -->
      <ul class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-slate-600">
        <li class="rounded-xl bg-white p-3 shadow-sm">เก็บความเย็นได้นาน 12 ชม.</li>
        <li class="rounded-xl bg-white p-3 shadow-sm">สแตนเลส 304 ปลอดภัย</li>
        <li class="rounded-xl bg-white p-3 shadow-sm">รับประกัน 1 ปี</li>
        <li class="rounded-xl bg-white p-3 shadow-sm">ส่งด่วนทั่วไทย</li>
      </ul>
    </section>
  </main>

  <!-- Info section -->
  <section class="mx-auto max-w-6xl px-4 pb-24">
    <details class="rounded-2xl bg-white p-5 shadow-sm" open>
      <summary class="cursor-pointer text-lg font-medium">รายละเอียดสินค้า</summary>
      <div class="mt-3 text-slate-600 leading-7">
        วัสดุ: สแตนเลส 304, ปราศจาก BPA, ฝาซีล 2 ชั้น กันรั่ว<br/>
        การดูแล: ล้างด้วยฟองน้ำ ไม่ควรใช้สก็อตไบรท์, หลีกเลี่ยงเครื่องล้างจาน
      </div>
    </details>
  </section>

  <!-- Cart Drawer -->
  <div id="cartOverlay" class="fixed inset-0 z-30 hidden bg-black/30"></div>
  <aside id="cartDrawer" class="fixed right-0 top-0 z-40 h-full w-full max-w-md translate-x-full bg-white shadow-2xl transition-transform">
    <div class="flex h-full flex-col">
      <div class="flex items-center justify-between border-b p-4">
        <h2 class="text-lg font-semibold">ตะกร้าสินค้า</h2>
        <button id="closeCartBtn" class="rounded-xl border px-3 py-1.5 hover:bg-slate-50">ปิด</button>
      </div>

      <div id="cartItems" class="flex-1 divide-y overflow-auto"></div>

      <div class="border-t p-4 space-y-3">
        <div class="flex items-center justify-between text-sm text-slate-600">
          <span>ยอดรวมสินค้า</span>
          <span id="subtotalLabel">฿0</span>
        </div>
        <div class="flex items-center justify-between text-sm text-slate-600">
          <span>ค่าจัดส่ง</span>
          <select id="shippingSelect" class="rounded-lg border px-2 py-1">
            <option value="standard">แบบประหยัด (฿40)</option>
            <option value="express">ด่วน (฿80)</option>
          </select>
        </div>
        <div class="flex items-center justify-between font-semibold">
          <span>ยอดชำระ</span>
          <span id="totalLabel">฿0</span>
        </div>
        <button id="checkoutBtn" class="w-full rounded-2xl bg-slate-900 px-5 py-3 text-white font-medium hover:bg-slate-800">ไปชำระเงิน</button>
        <p class="text-xs text-slate-500">*ตัวอย่างนี้ไม่มีระบบเก็บเงินจริง – ปุ่มนี้จะแสดงสรุปรายการเพื่อส่งให้ร้าน</p>
      </div>
    </div>
  </aside>

  <!-- Checkout Modal -->
  <div id="checkoutModal" class="fixed inset-0 z-50 hidden items-center justify-center">
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 w-[min(92vw,640px)] rounded-2xl bg-white p-6 shadow-xl">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">สรุปรายการสั่งซื้อ</h3>
        <button id="closeCheckout" class="rounded-xl border px-3 py-1.5 hover:bg-slate-50">ปิด</button>
      </div>
      <div id="checkoutSummary" class="mt-4 text-sm text-slate-700 space-y-2"></div>
      <div class="mt-4 rounded-xl bg-slate-50 p-4 text-sm text-slate-600">
        ส่งออเดอร์ให้ร้านได้ทาง Line: <span class="font-medium">@minimalbottle</span> หรืออีเมล <span class="font-medium">order@minimalbottle.example</span><br/>
        (คัดลอกสรุปรายการด้านบนแล้วส่งได้เลย)
      </div>
    </div>
  </div>

  <footer class="border-t py-10 text-center text-sm text-slate-500">© 2025 MinimalBottle. ตัวอย่างสาธิตเพื่อการเรียนรู้.</footer>

  <script>
    // ======== CONFIG (แก้ไขข้อมูลสินค้าได้ที่นี่) ========
    const PRODUCT = {
      name: "ขวดน้ำมินิมอล",
      baseImage: "https://images.unsplash.com/photo-1543165796-5426273eaab6?q=80&w=1200&auto=format&fit=crop",
      currency: "THB",
      colors: [
        { id: "black", label: "ดำแมตต์" },
        { id: "white", label: "ขาวมุก" },
        { id: "ocean", label: "โอเชียน" },
      ],
      sizes: [
        { id: "350", label: "350ml" },
        { id: "500", label: "500ml" },
        { id: "750", label: "750ml" },
      ],
      // ราคา/สต็อกต่อ variant (color|size)
      variants: {
        "black|350": { price: 390, compareAt: 450, stock: 8, sku: "MB-B-350" },
        "black|500": { price: 420, stock: 5, sku: "MB-B-500" },
        "black|750": { price: 480, stock: 0, sku: "MB-B-750" },
        "white|350": { price: 390, stock: 12, sku: "MB-W-350" },
        "white|500": { price: 420, stock: 7, sku: "MB-W-500" },
        "white|750": { price: 480, stock: 4, sku: "MB-W-750" },
        "ocean|350": { price: 410, stock: 3, sku: "MB-O-350" },
        "ocean|500": { price: 450, stock: 2, sku: "MB-O-500" },
        "ocean|750": { price: 499, compareAt: 550, stock: 6, sku: "MB-O-750" },
      },
      shipping: {
        standard: 40,
        express: 80,
        freeThreshold: 1000,
      },
    };

    // ======== Helpers ========
    const fmtTHB = (n) => new Intl.NumberFormat('th-TH', { style:'currency', currency:'THB', maximumFractionDigits:0 }).format(n);
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    // ======== State ========
    const state = {
      color: PRODUCT.colors[0].id,
      size: PRODUCT.sizes[1].id, // default 500ml
      qty: 1,
      cart: JSON.parse(localStorage.getItem('cartV1') || '[]'),
      shippingMethod: 'standard',
    };

    // ======== UI Refs ========
    const priceLabel = $('#priceLabel');
    const compareAtLabel = $('#compareAtLabel');
    const stockBadge = $('#stockBadge');
    const colorGroup = $('#colorGroup');
    const sizeGroup = $('#sizeGroup');
    const qtyInput = $('#qtyInput');
    const addToCartBtn = $('#addToCartBtn');
    const buyNowBtn = $('#buyNowBtn');
    const cartCount = $('#cartCount');
    const cartDrawer = $('#cartDrawer');
    const cartOverlay = $('#cartOverlay');
    const cartItems = $('#cartItems');
    const subtotalLabel = $('#subtotalLabel');
    const totalLabel = $('#totalLabel');
    const shippingSelect = $('#shippingSelect');
    const checkoutBtn = $('#checkoutBtn');
    const checkoutModal = $('#checkoutModal');
    const checkoutSummary = $('#checkoutSummary');

    // ======== Render Options ========
    function renderOptions() {
      colorGroup.innerHTML = PRODUCT.colors.map(c => `
        <button class="option-btn rounded-2xl border px-3 py-2 hover:bg-slate-50" role="radio" aria-checked="${state.color===c.id}" data-color="${c.id}">${c.label}</button>
      `).join('');
      sizeGroup.innerHTML = PRODUCT.sizes.map(s => `
        <button class="option-btn rounded-2xl border px-3 py-2 hover:bg-slate-50" role="radio" aria-checked="${state.size===s.id}" data-size="${s.id}">${s.label}</button>
      `).join('');

      // bind
      $$('#colorGroup .option-btn').forEach(btn => btn.addEventListener('click', () => {
        state.color = btn.dataset.color;
        updateVariantUI();
        updateOptionActive();
      }));
      $$('#sizeGroup .option-btn').forEach(btn => btn.addEventListener('click', () => {
        state.size = btn.dataset.size;
        updateVariantUI();
        updateOptionActive();
      }));
    }

    function updateOptionActive(){
      $$('#colorGroup .option-btn').forEach(b => b.setAttribute('aria-checked', String(b.dataset.color===state.color)));
      $$('#sizeGroup .option-btn').forEach(b => b.setAttribute('aria-checked', String(b.dataset.size===state.size)));
    }

    function getVariant() {
      return PRODUCT.variants[`${state.color}|${state.size}`];
    }

    function updateVariantUI(){
      const v = getVariant();
      if(!v){
        priceLabel.textContent = 'ไม่มีรุ่นนี้';
        compareAtLabel.hidden = true;
        stockBadge.textContent = 'หมดชั่วคราว';
        stockBadge.className = 'ml-auto inline-flex items-center rounded-full bg-rose-50 px-3 py-1 text-rose-600 text-sm';
        addToCartBtn.disabled = true;
        return;
      }
      priceLabel.textContent = fmtTHB(v.price);
      if(v.compareAt && v.compareAt>v.price){
        compareAtLabel.hidden = false;
        compareAtLabel.textContent = fmtTHB(v.compareAt);
      } else {
        compareAtLabel.hidden = true;
      }
      if(v.stock>0){
        stockBadge.textContent = `มีของ • เหลือ ${v.stock}`;
        stockBadge.className = 'ml-auto inline-flex items-center rounded-full bg-emerald-50 px-3 py-1 text-emerald-600 text-sm';
        addToCartBtn.disabled = false;
      } else {
        stockBadge.textContent = 'หมดชั่วคราว';
        stockBadge.className = 'ml-auto inline-flex items-center rounded-full bg-rose-50 px-3 py-1 text-rose-600 text-sm';
        addToCartBtn.disabled = true;
      }
    }

    // ======== Qty ========
    $('#incQty').addEventListener('click', ()=>{ qtyInput.value = Math.min(99, (+qtyInput.value||1)+1); state.qty = +qtyInput.value; });
    $('#decQty').addEventListener('click', ()=>{ qtyInput.value = Math.max(1, (+qtyInput.value||1)-1); state.qty = +qtyInput.value; });
    qtyInput.addEventListener('input', ()=>{ const n = Math.max(1, Math.min(99, Math.floor(+qtyInput.value||1))); qtyInput.value=n; state.qty=n; });

    // ======== Cart ========
    function persistCart(){ localStorage.setItem('cartV1', JSON.stringify(state.cart)); }
    function cartSubtotal(){ return state.cart.reduce((s, it)=> s + it.price*it.qty, 0); }
    function shippingCost(){
      const sub = cartSubtotal();
      const method = state.shippingMethod;
      if(sub >= PRODUCT.shipping.freeThreshold) return 0;
      return method==='express' ? PRODUCT.shipping.express : PRODUCT.shipping.standard;
    }

    function renderCart(){
      cartCount.textContent = state.cart.reduce((s,it)=> s+it.qty, 0);
      subtotalLabel.textContent = fmtTHB(cartSubtotal());
      const total = cartSubtotal() + shippingCost();
      totalLabel.textContent = fmtTHB(total);

      if(state.cart.length===0){
        cartItems.innerHTML = `<div class="p-6 text-center text-slate-500">ยังไม่มีสินค้าในตะกร้า</div>`;
        return;
      }
      cartItems.innerHTML = state.cart.map((it, idx)=>`
        <div class="flex items-center gap-3 p-4">
          <div class="h-16 w-16 overflow-hidden rounded-xl bg-slate-100">
            <img src="${PRODUCT.baseImage}" class="h-full w-full object-cover" alt="${PRODUCT.name}"/>
          </div>
          <div class="flex-1">
            <div class="font-medium">${PRODUCT.name}</div>
            <div class="text-xs text-slate-500">สี: ${labelOf('color', it.color)} • ขนาด: ${labelOf('size', it.size)}</div>
            <div class="mt-1 text-sm">${fmtTHB(it.price)} × 
              <input data-idx="${idx}" type="number" min="1" max="99" value="${it.qty}" class="w-14 rounded border px-2 py-0.5 text-center" />
            </div>
          </div>
          <div class="text-right">
            <div class="font-medium">${fmtTHB(it.price*it.qty)}</div>
            <button class="text-rose-600 text-xs" data-remove="${idx}">ลบ</button>
          </div>
        </div>
      `).join('');

      // bind qty change & remove
      cartItems.querySelectorAll('input[type="number"]').forEach(inp=>{
        inp.addEventListener('input', ()=>{
          let q = Math.max(1, Math.min(99, Math.floor(+inp.value||1)));
          inp.value = q;
          state.cart[inp.dataset.idx].qty = q;
          persistCart();
          renderCart();
        });
      });
      cartItems.querySelectorAll('[data-remove]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const i = +btn.dataset.remove;
          state.cart.splice(i,1);
          persistCart();
          renderCart();
        });
      });
    }

    function labelOf(type, id){
      const list = type==='color' ? PRODUCT.colors : PRODUCT.sizes;
      return (list.find(x=>x.id===id)||{}).label || id;
    }

    function addCurrentVariantToCart(){
      const v = getVariant();
      if(!v || v.stock<=0) return alert('รุ่นนี้หมดชั่วคราว');
      const key = `${state.color}|${state.size}`;
      const line = {
        sku: v.sku,
        color: state.color,
        size: state.size,
        price: v.price,
        qty: state.qty,
        key,
      };
      // merge if same variant exists
      const existing = state.cart.find(x=>x.key===key);
      if(existing) existing.qty = Math.min(99, existing.qty + state.qty);
      else state.cart.push(line);
      persistCart();
      renderCart();
      openCart();
    }

    // ======== Drawer Controls ========
    function openCart(){ cartDrawer.style.transform='translateX(0)'; cartOverlay.classList.remove('hidden'); }
    function closeCart(){ cartDrawer.style.transform='translateX(100%)'; cartOverlay.classList.add('hidden'); }
    $('#openCartBtn').addEventListener('click', openCart);
    $('#closeCartBtn').addEventListener('click', closeCart);
    cartOverlay.addEventListener('click', closeCart);

    // ======== Shipping ========
    shippingSelect.addEventListener('change', ()=>{ state.shippingMethod = shippingSelect.value; renderCart(); });

    // ======== Checkout (no-payment demo) ========
    checkoutBtn.addEventListener('click', ()=>{
      if(state.cart.length===0) return alert('ตะกร้าหาว่างเปล่า');
      const lines = state.cart.map(it=>`• ${PRODUCT.name} – สี: ${labelOf('color', it.color)}, ขนาด: ${labelOf('size', it.size)} x ${it.qty} = ${fmtTHB(it.price*it.qty)} (SKU: ${it.sku})`).join('<br/>');
      const sub = cartSubtotal();
      const ship = shippingCost();
      const tot = sub + ship;
      checkoutSummary.innerHTML = `
        หมายเลขคำสั่งซื้อ (ร่าง): #MB-${Date.now().toString().slice(-6)}<br/>
        รายการสินค้า:<br/>${lines}<br/>
        ยอดรวมสินค้า: <b>${fmtTHB(sub)}</b><br/>
        ค่าจัดส่ง (${state.shippingMethod==='express'?'ด่วน':'ประหยัด'}): <b>${fmtTHB(ship)}</b><br/>
        ยอดชำระทั้งหมด: <b>${fmtTHB(tot)}</b>
      `;
      checkoutModal.classList.remove('hidden');
      closeCart();
    });
    $('#closeCheckout').addEventListener('click', ()=> checkoutModal.classList.add('hidden'));

    // ======== Main CTA ========
    addToCartBtn.addEventListener('click', addCurrentVariantToCart);
    buyNowBtn.addEventListener('click', ()=>{ addCurrentVariantToCart(); setTimeout(()=>{ checkoutBtn.click(); }, 150); });

    // ======== Thumbs ========
    $$('.thumb').forEach(btn=> btn.addEventListener('click', ()=>{ $('#mainImage').src = btn.dataset.img; }))

    // ======== Init ========
    renderOptions();
    updateVariantUI();
    renderCart();
  </script>
</body>
</html>
